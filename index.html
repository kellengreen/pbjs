<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>pb.js</title>
    <style>
        body {
            color: hsl(0, 0%, 70%);
            font: 18px/1.2 monospace;
            background-color: hsl(0, 0%, 15%);
        }
        button, input {
            font: inherit;
        }
    </style>
   
</head>
<body>
    <!--
        [public]
        pb.symbol
        pb.domManager
        pb.ElemManager
        pb.listen("path", callback);
        pb.register("name", ElemManager);

        [private]
        pb._storage

        element.$elemManager
    -->

    <div pb-is="hello-world">
        <p>Hello, world!</p>
    </div>

    <button id="add">Add</button>
    <button id="remove">Remove</button>
    <button id="mod">Mod</button>
    <div id="container"></div>
    <script>
        let i = 0;
        const container = document.querySelector('#container');
        document.querySelector('#add').addEventListener('click', () => {
            const elem = document.createElement('div');
            elem.textContent = `[${i++}]`;
            container.appendChild(elem)
        });
        document.querySelector('#remove').addEventListener('click', () => {
            const elem = container.firstElementChild;
            if (elem) container.removeChild(elem);
        });        
        document.querySelector('#mod').addEventListener('click', () => {
            const elem = container.lastElementChild;
            if (elem) {
                elem.textContent = `{${i}}`;
                elem.setAttribute('pb-foo', i++);
            }
        });              
    </script>

    <script src="bin/pb.js"></script>
    <script>
        class MyManager extends pb.ElemManager {
            f() {
                console.log(this);
            }
        }

        const elem = document.createElement('div');
        const myManager = new MyManager(elem);
        const f = myManager.f;
        f();
        myManager.f();

    </script>    
</body>
</html>
